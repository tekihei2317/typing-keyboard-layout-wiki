# 英語の配列評価ツールを使ってみる

## Genkey

Semimak配列を作るときに使われたツール。

### インストール

GitHubのリリースページからダウンロードする。

### 機能

- 詳細な出力
- 生成？
- 重み付けのカスタマイズ
- 個々の配列の改善
- ヒートマップ出力
- インタラクティブな分析
- etc

ということで、一つずつ見ていこう。

```
- ヘルプ：genkey だけで実行するとコマンド一覧が出る。
- ランキング表示：genkey rank
- レイアウト詳細分析：genkey analyze colemak_dh（layouts/ にある名前を指定）
- ヒートマップ出力：genkey heatmap colemak_dh（config.toml の Output.Heatmap に指定されたパスに PNG）
- インタラクティブ分析：genkey interactive colemak_dh
- 最適化（既存レイアウト改善）：genkey improve colemak_dh
- 自動生成：genkey generate（Generation.GeneratedLayoutChars/InitialPopulation など設定を利用）
- コーパス読み込み：genkey load /path/to/corpus.txt
→ Corpus で指定した名前の JSON を Paths.Corpora 直下に生成し、以降の分析に使われる。
- N グラム頻度：genkey ngram th / genkey sfbs colemak_dh 15 / genkey dsfbs colemak_dh 10 など。
```

```bash
genkey load hello.txt
```

### コーパスの作成

`Hello, world!`と書いたテキストを読ませた。コーパスの形式にしてくれるみたい。`corpora/hello.json`が作成された。これを使うには`config.toml`を書き換える。

```txt
{
  "letters": { ",": 1, "d": 1, "e": 1, "h": 1, "l": 3, "o": 2, "r": 1, "w": 1 },
  "bigrams": {
    "el": 1,
    "he": 1,
    "ld": 1,
    "ll": 1,
    "lo": 1,
    "o,": 1,
    "or": 1,
    "rl": 1,
    "wo": 1
  },
  "trigrams": {
    "ell": 1,
    "hel": 1,
    "llo": 1,
    "lo,": 1,
    "orl": 1,
    "rld": 1,
    "wor": 1
  },
  "toptrigrams": [
    { "Ngram": "rld", "Count": 1 },
    { "Ngram": "hel", "Count": 1 },
    { "Ngram": "ell", "Count": 1 },
    { "Ngram": "llo", "Count": 1 },
    { "Ngram": "lo,", "Count": 1 },
    { "Ngram": "wor", "Count": 1 },
    { "Ngram": "orl", "Count": 1 }
  ],
  "skipgrams": {
    "e,": 0.25,
    "el": 1,
    "eo": 0.5,
    "h,": 0.125,
    "hl": 1.5,
    "ho": 0.25,
    "l,": 1.5,
    "lo": 1,
    "od": 0.5,
    "ol": 1,
    "rd": 1,
    "wd": 0.25,
    "wl": 0.5,
    "wr": 1
  },
  "TotalBigrams": 9,
  "Total": 14
}
```

```bash
genkey rank
```

配列がスコア順にランク付けされる。配列は`layouts`ディレクトリに入っている。

```bash
genkey generate
```

コーパスを元に、スコアを最小化するような配列を作成してくれる。

配列は一番上に表示されるやつが一番スコアがいいやつかな？それコピぺしてlayouts/に突っ込んでみました。

```bash
genkey improve [layout]
```

指定した配列を改善してくれる。動かさないものを決めるには`__generate`ファイルで設定する。`X`が移動不可、`*`は移動可。

```bash
genkey interactive qwerty
```

インタラクティブに配列を変更して結果を確認できる強力なツール。めちゃくちゃいいですね。

```bash
s key1 key2 # key1とkey2のスワップ
cs key1 key2 # key1がある列とkey2がある列のスワップ
cs col1 col2 # col1とcol2のスワップ
g # どのキーを入れ替えるべきかのアドバイス
save # 保存
q # 終了
```

## Genkeyの指標やスコアの計算方法を調べる

## Oxeylyzer